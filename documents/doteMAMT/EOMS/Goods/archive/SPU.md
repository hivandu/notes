---
title: 商品体系建立
date: 2020-08-27 14:33:00
author: Hivan
---

## 概述

POS的商品基本来自于ERP系统，包括类目和商品[SKU][1]，为了便于之后商品后台的源数据对接迁徙方便，所以这里仅做一个ERP商品SKU的映射关系，及SKU集合包装。

## 商品系统

商品管理系统属于零售系统中最基础、最核心的系统，是支撑整个零售系统的核心，基本上所有的系统都离不开商品数据，商品贯穿整个零售行为。

从商品的采购、到达仓库、商品上架、前台的展示、下单、物流配送、收货、售后服务等，整个流程都离不开商品。后台商品系统一般分为，类目管理、属性库、品牌管理、商品管理（发布商品、编辑商品、商品上下架、审核、价格库存设置、运费模板设置等），这里主要是定义后台商品管理。

## SPU和SKU

这两个词的相关定义可见[商品名词词汇表][2]。

### SPU、SKU、商品的关系

SPU和SKU的关系一般是一对多或者一对一的关系，SPU包含多个SKU，SKU是SPU的子集，而商品，就是SKU的具象化实物；

在前台SPU定义中，一个SKU也可能对应多个SPU，这种情况很少见，比如，运营在前台上架了一款商品，却当作两种商品进行上架，起了两个名字（红牛350ML， 红牛功能饮料350ML），此时在POS上理应被展示的，就应该是两种商品，但是其实，他在后台系统中之对应了一个SKU。

另外，有的时候我们需要将某一件商品进行打包售卖，这种情况可能商城更需要。比如，我们可能会将网鱼鼠标，键盘打包成数字两件套，这个时候的处理逻辑是将这两个SKU组合关联成一个虚拟的SKU，下发到仓库后，需要将虚拟SKU拆解，按照实际的SKU扣减库存，发货的时候，又将这两个SKU对应的商品打包成一个包裹送到用户手中。

:::tip
注意，这里的打包售卖，和后面将要理解的套餐，是不同的两个概念；
:::

## 商品管理

商品管理，其实就是对商品的维护管理工作，包括新增商品，商品的上下架，商品修改，商品的查询，设置运费模板（对应线上商城）等；


### 新增商品

商品的创建或者发布之前，其实都会选择挂靠类目，在实际操作中，这一步是在ERP中实现的。商品会调用类目中挂在的属性，但是这一步，其实是缺失的，并且，我们暂时也无力去改变这种现状，因为ERP的关联目前实在太大了，最核心的，就是三大核心流：信息流，物流，资金流；

关于另起炉灶再创建一套合理的SKU体系，这个后面进行讨论和规划，目前，我们就依赖ERP中的SKU去完成我们的商品管理功能，也就是说，暂时的方法，是只做前台类目管理；

:::tip
最困难的点，不在于挂靠类目，而在于规格属性挂靠类目后，SKU的生成规则是依赖于规格属性的，但是ERP中的SKU生成是基于类目层级关系手动生成的。所以这种情况下，完全无法合理的去规划规格矩阵和SKU之间的关系。
:::

为了保证新发布商品信息正确性，降低发布违规商品的风险，因此需要平台运营人员进行审核，才能保证平台发布商品的质量，审核后方可正常上下架商品，一般常见的审核流程可见[商品状态流转][3]

在ERP创建一个新的SKU的时候，默认会推送到前台类目管理内新建，因为缺少关联性，所以这个时候默认是创建一个新的SPU商品。系统需要获取到ERP中关于此SKU的相关信息，用于新品的自动创建。

#### 商品基本信息

商品的基本信息是对商品的基本描述，分为展示信息和隐藏信息两部分；

1. 展示信息，则包含了前台类目，商品标题，品牌信息，商品规格，商品参数，商品描述等信息。
2. 隐藏信息，则包含了后台类目（ERP分类），商品编码（SKU），商品

#### 商品属性

商品属性，需要区分规格和参数。详细可见[商品属性库][4]

在前台对商品进行管理的时候，需要设置规格和ERP内SKU的绑定关系；而参数，则可以设置和SKU关联无关的一些属性，大部分时候，是用于设置饮品的区别属性，比如：甜度："多糖"，“正常”，“少糖”，“不要糖”；

#### 商品图文描述

包括商品图和商品描述，这个部分主要是需要支撑线上点单和商城业务；

#### 库存设置

一般来说，库存设置是针对商品的销售属性（规格属性），即商品的SKU，设置对应价格和库存，不同规格的商品对应不同的价格和库存，当商品库存销售为0时候会自动下架。

一般有两种做法，一种是SKU库存同步WMS系统中库存，即实物库存，还有一种做法，就是人工设置活动库存。大部分电商，所使用的都是第二种，由商家自由填写活动库存。对于网鱼的业务来讲，盘营盘亏是很重要的一个业务动作，所以同步WMS系统库存也就需要考虑。

在这里，==可以讨论一个折中做法==：

每日将WMS系统中的库存作为基准值保存在前台管理内，当日的扣减则以这个基准值作为参考来自动控制商品是否上下架（一般只需要控制下架和不可售）；当然，库存阈值是需要进行设置和管理的。

#### 支付与减库存

考虑支付信息，其实是为了考虑库存不同的扣减方式。考虑到线上业务，网鱼的付款方式可能会分为三种：

1. 一口价（一次付清）
2. 预售模式（先付一部分定金，商品开始售卖，付清尾款）
3. 货到付款（用户确认收货再支付）

那么库存计数也需要划分为两种：

1. 下单减库存
2. 付款减库存

那么下单减库存会存在用户恶意下单而不买，付款减库存，又会存在超卖风险；

基于此，库存需要添加一个中间态：**锁定库存**

当用户下单的时候，需要对库存进行虚拟扣除，也就是锁定减少的库存量，此时并未真实发生库存减少。而当用户取消订单或者时间超限未支付时，锁定状态解除；

#### 物流信息

这里主要是针对线上商城的实物售卖，主要是根据商品具体情况选择提前设置好的[运费模板][5]

#### 售后服务

一般是商品售后对用户的承诺，例如，退换货承诺；

![](http://qiniu.hivan.me/mweb/2020-09/15990382591356.jpg)


我们有售后么？应该没有，这部份是我意淫的，大家知道有这么个东西就行了。


#### 可售卖时间管理

虽然说大部分商品都是全时段可售卖，但是不免有些商品是会设置某些时段可售卖。这种需求更多是反映在线上渠道上，由于线上受众主体是用户，用户的行为可控性较低，所以需要在商品上进行特殊控制。可售卖时间管理，就是一个程序自动执行的可控管理；

分为：
1. 全时段可售（默认）
2. 自定义时间，

##### 全时段可售

全时段可售是默认状态，表示这个商品不受日期和时间限制，在任意时间内都可正常售卖。

##### 自定义时间

分两个设置项：
1. 选择日期(XX年XX月XX日 - YY年YY月YY日)
2. 售卖时间段
	1. 全时段售卖
	2. 自定义时间
		1. XX时XX分 - XX时XX分（可添加2个时段）

#### 商品原料

属于扩展开发项

前台可选项，作为饮品或者需要制作原料的商品进行选择；

此选项从ERP的固定原料分类中去选择，如果不知道是啥，也可以不选。

### 编辑商品



### 移除商品

移除商品的操作是基于菜单进行操作的，换句话说，移除商品并没有操作总的商品库，只是从某一个自建菜单中移除了而已。

可以针对一个SPU下的SKU(规格)做移除，也可以直接移除整个SPU。

### 商品状态流转

一般来讲，商品的状态需要区分为：

1. 新增
2. 待审核
3. 审核通过
4. 在售（上架）
5. 待售（下架）
6. 售罄
7. 失效
8. 有效待审核

状态流转中，部分是需要在后台中进行流转，部分是前台设置进行流转，如图：

![][image-1]

从这张流程图可见，一件商品从创建，发布，到结束，其实全部都在ERP内进行流转实现，而我们所要做的商品管理中间层，是不管商品生命周期的。

但是我们在创建这个中间层的时候，关于商品生命周期的管理中要注意接收通知，因为一个==商品生命周期的结束，业务层面上，表示这个商品相关的业务也将结束==，将业务线的相关影响考虑周全并将其影响讲到最低是需要进行考量的。

:::warning
上面叙述生命周期中所提到的商品，仅为ERP中商品的实际SKU，并非实际商品；
:::

中间层所要管理的，是商品在生命周期通过审核之后，在商品有效待审核之前这之间进行==在售、待售以及售罄==之间的状态流转。

这些状态的转换，一般都是门店单独进行管理，但是又受到总部状态影响。当总部设置商品状态为待售（下架）的时候，此商品在门店无法再上架销售。

总部只可以操作一件商品的上架和下架，**无法对商品设置售罄**。商品售罄属于门店行为；另外，门店除了可以手动管理售罄状态，如果门店库存达到库存阈值的情况下，会自动触发售罄；

## 运费模板



[1]:	./glossary.md#SKU
[2]:	./glossary.md
[3]:	#商品状态流转
[4]:	./attributes.md
[5]:	#运费模板

[image-1]:	http://qiniu.hivan.me/mweb/2020-08/15986331714810.jpg