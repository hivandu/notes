# 精细化管理运营



## BI系统

在传统业态下，企业习惯通过报表来核对账目，了解大局情况，但对每个出现的问题、差异很少会做出详尽的跟踪和分析，很多线下环节的不规范也会造成反馈数据的核准校验难度过大。

互联网的发展改变了这一切，线上系统的标准化使数据的收集更为全面准确，而针对数据的分析跟踪也能进一步通过系统完善改进。数据驱动生产已经变成互联网企业的一个标志，数据不仅仅记录了所有的行为和账目，还为商业模式、业务流程等方方面面提供了强有力的支撑。作为平台的“大脑”，BI系统已经是所有电商/O2O平台或者互联网企业的标准配置了。

BI（Business Intelligence）是商业智能的简称，BI系统在一些公司也叫数据中心或者数据分析系统。BI系统的作用主要是负责对电商平台中的海量数据进行分析、处理，寻找业务生产中出现的问题并提供合理有效的商业分析建议，协助改进业务生产。

关于BI赋能的部分，可见《[网鱼数字化转型 - 如何赋能BI](http://192.168.10.138/product/#/Data/如何赋能BI)》



### BI系统发展历程

关于BI发展历程，网上能查出一堆，在这里就不长篇大论的写了。但是单独拿出这一小节来，还是要说明一下：BI系统包含了数据获取、数据处理、数据可视化和数据分析挖掘4个部分。提出这一点，也是为了下面好理解BI系统的业务逻辑。



### BI系统的业务逻辑与架构

BI系统是电商平台中最重技术的系统之一，在产品上的业务逻辑并不十分复杂。BI系统的产品需要把关注点放在数据口径制订、数据I/O的标准上。

从产品架构上也可以看出BI系统的产品逻辑核心是数据处理和数据抽取存储口径制订。

数据统计分析相对其他业务系统来说与具体业务诉求关联更强，不同业务场景下对于数据的要求、维度和字段都可能是不相同的。如何在复杂的数据里去处理业务的数据需求呢？

在实际执行过程中，根据数据使用的不同场景，按照数据使用的方式可分为3种业态组合，即：

- 业务报表
- 数据工具
- 数据应用

业务报表指的是一些常规的数据统计，如GMV营收、订单量和门店数量等。业务报表是业务最常用的数据展示形式，它大多以表格的形式陈列给相关职能人员。每个业务部门会按照自己的实际业务情况提出报表需求，报表构建需要对业务情况进行深入的了解后才能确定需要展示的相关信息和字段。原则上所有的统计数据都可以通过业务报表的形式提供给业务方，但由于维度复杂且每个人员对于业务的诉求不一致，重复不断地去开发个性化报表，从时间或者人力上来说都是不合理的，因此BI系统需要构建出自己的数据工具，**数据工具可以让业务运营人员通过简单的培训就可完成复杂维度报表甚至图表的配置、生成工作。**数据处理不再只是由开发人员完成，有效地提高了数据处理的效率。

数据工具主要负责处理一些临时性报表或者维度复杂的业务分析报表，它需要对每个业务场景进行数据建模，建模后的宽表可以用于业务的报表配置。

当然也有一些特殊的数据使用并不在BI系统中，比如前面讲到的CRM也会进行数据的展示，这个时候需要BI系统提供数据处理和输出的能力，也就是BI系统的第3种业态组合——数据应用。

虽然从业务角度来看数据使用的方式都不相同，但在数据的实际操作流程中，它们都要经过3个步骤：

- 数据存储
- 数据处理
- 数据可视化

接下来我们按照步骤看一下在实施具体数据操作的时候都需要关注哪些事情，如图：

<img src="http://qiniu.hivan.me/picGo/20210227143721.png" alt="image-20210227143721895" style="zoom:50%;" />



**数据存储**

数据存储主要负责将各种外部、内部数据在通过拉取、清洗和处理等行为后，把符合数据统计标准的数据存储下来。BI系统的数据都是独立存储的，为了不对业务系统造成影响，所有的数据处理都是在BI系统的数据表内进行操作的，而数据也都是从各个业务系统拉取到的。数据拉取主要包括两类内容：业务数据库表中的数据和日志中的数据。一般数据库中存储的多为业务执行完成的结果信息，如订单信息、商品信息等，而日志为过程数据，如点击操作、浏览操作等。

业务系统的数据信息字段多，而且不同业务系统间会包含重复字段。为了保证在大数据处理时提高处理效率，会根据实际情况进行数据建模，建模后的数据会保存在BI系统的宽表中。宽表从字面意义上讲就是字段比较多的数据库表，通常是指业务主题相关的指标、维度和属性关联在一起的一张数据库表。BI系统的宽表都是多个业务数据库表提取组合成的。



**数据处理**

数据处理主要是对存储的数据进行业务逻辑方面的处理，所有和业务逻辑相关的配置和处理都在这一层统一处理。从各个业务系统收集回来的数据参差不齐，为了满足业务的数据需求，需要对数据进行加工处理。在处理数据时，又将数据分为数据模型和BI层数据两部分。数据模型指的是单个业务需求下的需求内容，有一点需要注意的是，这里的业务需求指的是业务提出需求对应的业务实体，比如订单量对应的是订单主表的数据，而延伸的数据则需要独立建模，如订单的评论、商品明细等。BI层则可以组装多个实体的数据模型用于展示。我们先来看一下数据模型，按照业务的诉求组成不同的数据模型，简单地说，数据模型也是数据库表，只不过是汇总后的宽表。数据模型的抽取要遵循3个准则。

- 限定条件：数据使用限定范围，比如按城市维度、按用户级别维度等，限定条件相关的字段需要出现在建模后的宽表中，以便在配置处理时使用。
- 业务需求：业务提出的数据需求，比如希望看到每个城市的订单量等，如果包含多个实体的诉求，则需要我们进行拆解。
- 数据口径：数据统计方法不同，统计的结果也千差万别，因此，统一数据的标准是非常重要的，口径的维度包括但不限于取数周期、取数范围和计算规则等。

数据建模时要遵从数据库的第三范式，即非主键的字段之间不能存在其他函数关系。而如果涉及复杂的数据显示诉求，则可以在BI层通过数据模型的组合来实现，以减少耦合度。数据模型也会因为统计周期的不同而有实时和非实时两种情况。非实时数据模型一般用于统计对于时间敏感度较低的信息，比如统计全国日均单量、日均用户数等；非实时的数据模型通常是通过脚本的方式进行周期性统计，考虑到处理量大的情况，一般会选择在后半夜进行。

在这里提一下数据挖掘，数据挖掘也属于数据处理的一种，它是通过一定的算法找到数据之间的关系并把这个关系记录下来（也就是保存在宽表中建模）。关于数据挖掘的算法，网上有很多介绍，这部分是属于开发的范畴。

网鱼目前对于大数据的处理，缺少的就是数据挖掘的相关部分，增强这部份对于网鱼相关数据自动化处理是非常重要的一环。



**数据可视化**

数据可视化主要是将处理或配置后的数据表按照业务的维度要求进行展示，包括图文、表格等形式，也可以通过推送的方式定期发送数据内容给指定人选。上面讲到的3种业态组合实际是通过显示输出方式来区分的。常用的报表通过固化的方式展示，而一些复杂的报表则通过模型字段配置来组合，也就是BI层的数据模型组合展示。在显示时一般会分为单表（Chart）和看板（Dashborad）两种。看板多用于多个维度对比展示，往往用于整体状况分析；单表则属于某个细分业务单独的数据统计。

在推送方式上，数据展示包括数据报表展示、邮件推送和数据对外输出等3种方式。数据对外输出指的是为外部系统提供数据计算处理后的结果。在切分BI系统与其他系统边界的时候应遵循几个原则：

- 数据计算处理属于BI系统；
- 根据数据触发的操作流程，业务一般会放在业务系统中进行；
- 业务数据的展示要根据业务操作的便利性和与数据触发后续流程的紧密度来判断由哪个系统来实现。

## 本期系统交互情况

BI系统虽然属于中台系统，但从系统的角色来看，它是位于所有系统的最后方、类似于电商平台的“大脑”。

BI系统抽取所有业务系统的原始数据，再根据实际需求生成对应的数据信息和报表。而业务人员则可以通过BI系统的报表来决策后续业务行为和其他业务系统的流程改进（比如用户端的购买流程优化可以通过用户行为数据分析来进行），也可以将BI系统进行数据挖掘、加工后的计算结果反馈给相关业务系统，由业务系统判断是否进行后续的操作和改进。

BI系统的数据不仅仅来自于中台的运营系统，还来自于前台和后台的系统，判断的标准是是否需要基于大数据平台进行分析、挖掘，如果需要，则必须要求相关业务系统提供数据内容来进行分析处理，结构如图：

![image-20210227143747646](http://qiniu.hivan.me/picGo/20210227143747.png)



从实体对应关系来看，BI系统和业务系统主要是数据方面的对应，其他的业务逻辑并没有太多的关系，如图：

![image-20210227143757489](http://qiniu.hivan.me/picGo/20210227143757.png)



前面讲了BI系统从上到下分为4部分：

1. 业务数据
2. 数据模型
3. BI层
4. 数据展示

业务数据和数据模型是多对多的关系；而BI层由于已经是比较明确的数据结果，因此它和数据模型是一对多的关系；数据展示的表格和BI层是一对一的关系。