# 增加售卖形式

## 促销系统

百度百科上对于促销的定义是这样的：促销实质上是一种沟通活动，即营销者（信息提供者或发送者）发出作为刺激消费的各种信息，把信息传递到一个或更多的目标对象（即信息接收者，如听众、观众、读者、消费者或用户等），以影响其态度和行为。

根据定义，我们利用5W2H方法对促销进行拆解，促销的元素主要有几个部分：

- 商品信息（What）
- 促销规则（How，Why）
- 定向用户（Who）
- 发放渠道（Where）
- 活动计划（When）
- 投入成本（How Much）

这里面和促销系统紧密相关的主要是商品信息、促销规则和定向用户，发放渠道、活动计划、投入成本因为涉及较多系统和角色的参与，不做展开说明，下面说的主要是商品信息、促销规则和定向用户。



### 促销系统的核心功能

根据上述分析，促销系统是解决将商品按照一定的方式和玩法售卖并告知用户，刺激用户加大消费力度的管理系统。将促销系统按模块拆分，它主要分为3部分。

- 促销活动：活动投放的设置管理，负责提供活动方式和商品内容
- 促销规则：促销规则的设置管理，负责提供促销玩法
- 优惠券：负责优惠券管理，提供一种相对独立的促销形式

从大的维度来看，优惠券也是促销的一种方式，促销规则也和优惠券的使用有一定关联。这里我们把优惠券也归类到促销系统中，在实际功能设计时，优惠券也可以独立于促销系统进行单独处理。



### 促销活动

促销活动的基本属性管理，主要功能包括以下几种。

- 商品选择：参加促销的商品，分为活动商品和赠品两种
- 促销类型：何种促销方式
- 规则选择：具体促销规则的参数
- 投放时间选择
- 投放区域选择（O2O必选项）
- 打标签：商品数据打促销标识，前端显示促销标签



### 促销规则

促销规则是促销系统核心中的核心，也就是俗称的VIP中的P。一个促销系统的好坏取决于促销规则设计是否合理，促销规则又间接受其他相关系统的制约。



促销规则有几个维度的划分：平台、商品种数和促销方式。

以平台为维度划分为：自营促销、POP平台促销。

以促销类型为维度划分为：单品促销、集合促销和店铺级促销。

单品促销：以单个商品为维度进行的促销叫单品促销，例如限时抢。

集合促销：通过商品集合来满足促销规则的促销叫集合促销，例如满额减。

店铺级促销：以网鱼门店为维度进行的促销叫店铺级促销，例如门店级满额折（区域申请的促销行为也是店铺级促销）。



以促销方式为维度划分为以下几类。

- 直减类：限时抢、直减、多买多折、VIP专享价和手机专享价等
- 送赠品类：满赠
- 换购类：加价购、凑单等
- 满额类：满额减、满额折等
- 返券类：满额返券
- 组合优惠类：套餐
- 预订类：团购



这里优惠券形式和其他促销规则有共同的地方，不再单独列出来，具体优惠券系统后面还会写，这里简单提一下需要注意的内容。

首先，在制订规则时要考虑购买时活动之间的共享与互斥，原则上所有的商品不可以同一时间参加两项活动，应按照一定的优先级完成用户的优惠享用［例如单品>组合>品类>整单（或店铺），满减优先级大于代金券，优惠金额多的规则优先，等等］。但有两种情况可以例外：

1. 价格类直减和满额促销可以共享，可以使用优惠后的价格来计算满足金额；
2. 优惠券和部分促销类型可以共享，具体的情况要看业务实际过程中毛利的情况和考虑来决定。

优惠券是以券的方式实行促销优惠的，优惠券管理需要设置生效时间、使用次数和发放方式等优惠券优惠形式。



优惠券也有几个维度的划分：品类、平台和促销类型。

- 品类：按照类目品类区分
- 平台：分为自营和店铺、全场
- 促销类型：满减、直减



关于优惠券，有几个需要注意的事项。

1. 优惠券的“使用”定义，一般情况下会在生成订单后去绑定优惠券使用，在退单时退回优惠券。
2. 优惠券回退情况分为部分退和整单退。部分退是只退回分摊在商品上的金额，当不满足优惠券使用门槛时，考虑到用户体验，一般不会重新计算订单金额，还是允许用户继续使用优惠券。
3. 分摊金额除不尽时，一般会有一个商品比其他的多分摊少量金额，取小数两位即可，四舍五入还是直接舍去，需要同后端报表等金额规则一致。



### 促销的关系图谱

促销系统作为电商、O2O的核心系统，和各个系统之间的关联紧密。列举了一些和促销有关系的主要模块和系统体系。在有些公司，可能部分模块不属于同一体系，这里为了方便归类认知，将它们放在了一起（比如订单结算）。可以看到，订单、商品是和促销关联最紧密的，用户端则通过API获取到促销的信息。几乎前端大多数主流程页面都需要和促销系统做联动。

接下来，我们模拟一下一个公司发展过程中逐步完善促销功能的“进化”过程（接手这项目的产品经理需要根据网鱼的情况对整体步骤自行调整）。



### 初步搭建

电商或O2O搭建之初，能够支持的促销形式比较单一，一般会选择直减类型的限量购，比如特价商品，这时促销系统需要支持以下功能。

1. 商品

- 促销商品的选择
- 促销价格的设置

2. 库存

- 锁定促销库存还是和普通价格的商品共享库存（促销系统、库存系统/商品系统）
- 库存管理是在库存系统中还是在商品系统中

3. 活动

- 促销活动的投放设置
- 适用群体设置：新用户、老用户，初期可不做限制
- 促销规则关联
- 促销展现形式的处理

4. 促销规则

- 支持商品直减促销价
- 支持限量购，超出部分恢复原价

上述功能实现了初期促销系统的雏形，在实际实现过程中，考虑到一些客观因素，会有一些折中的情况。

- 活动设置时只支持全场概念，初期可不区分过多区域。O2O可以考虑只支持单店模式，不支持全场模式
- 商品系统如果不完善，可以考虑部分信息放在促销系统中设置（比如价格）。管理多个商品的时候，初期可以考虑用Excel上传的方式
- 业务上考虑避免SKU毛利过低，直减促销形式搭配限量购（如特价商品限售一份），规则设计时要考虑是否将两种规则融合成一种规则，避免后期扩展时交叉逻辑特别多
- 适用用户在前期可只区分新、老用户两种，如果工期较紧，可以不做区分，后期补足
- 促销规则方面，电商系统一般会将每种促销功能单独定制，O2O逻辑相对简单，也可以考虑做一个通用的规则库来选择



### 升级改造

初步尝鲜后，业务人员尝到了甜头，希望进一步扩大可以操作的促销玩法，提高订单的SKU数，满额类促销的需求随之到来。相对于之前做的直减和限量购这些单品级促销来说，满减属于集合促销，逻辑上更为复杂。为了满足这个需求，功能上需要升级为2.0版本。

1. 活动

- 活动上增加规则优先级制订：共享、互斥的逻辑
- 考虑毛利和业务场景等因素，集合促销需要关注可选商品的适用范围：品类、平台等

2. 促销规则

- 增加满减规则

3. 订单

- 集合级促销订单的优惠金额需要分摊到品
- 退单时考虑按品分摊金额进行退款

4. 用户端

- 在购物车、结算页增加集合促销享受提示，独立于商品之外



### 优惠券出现

平台进入了高速发展时期，为了能够进一步提高拉新的效果，业务人员提出了优惠券（也叫红包）的诉求。同时，为了配合优惠券的站内推广和提高复购率，增加满返促销的形式。

1. 优惠券

- 增加优惠券：满减券、直减券等
- 添加生成规则：门槛、区域、优惠券金额、适用品类和平台等
- 添加发放规则：放发渠道（直投用户账户、兑换码和微信红包等）和领取规则等

2. 促销规则

- 增加满返促销规则，返优惠券。

3. 订单

- 增加优惠券金额分摊
- 退单时退还优惠券使用

4. 用户端

- 支持分享功能，提供微信红包分享。

5. 门店

- 考虑平台券和门店券的区分
- 支持门店设置发券
- 最好支持股东维度的消费券（仅此股东下的门店可用）



由于优惠券的引入和门店概念的增加，促销系统变得复杂起来。这里简单介绍一下优惠券和促销的关系和相关考量，详细内容会在后面介绍。

- 优惠券使用范围的确定要考虑全场券和门店、自营券的互斥使用，优惠券和部分促销活动的互斥使用如满减和优惠券等）

- 在退单时，部分退和整单退的情况下，优惠券金额如何处理原则上部分退后，即使不满足门槛，也不会取消未退商品的满减金额

- 红包的发放要考虑领取数量限制，门槛的设置也要考虑到风控的因素，避免出现减完金额变成0这种情况

  

### 从让利到赠送

一段时间之后，业务人员又有了新的想法：满赠需求。不过现在的促销系统在结构上已经比较完善了，哪里没有加哪里

- 促销规则：增加满赠促销方式
- 商品：增加赠品属性，促销活动可以选择赠品类型商品
- 库存：增加赠品库存管理
- 订单：退单时退还赠品
- 用户端：显示赠品提示

需要考虑的是，当赠品赠完时，满赠活动应该下线，此时享受满赠的商品是否还继续售卖。



## 优惠券系统

优惠券指的是以纸质或者电子的方式进行发放，用户领取后使用它可以降低产品价格的券种。这里讲的优惠券也可以叫作促销券，是一种泛泛的叫法，通常意义上，红包、代金券等都可以归为优惠券。

作为主要的营销手段和方式，优惠券有着举足轻重的作用。领券下单已经成为用户购买行为的一个固定模式，因此优惠券相当于营销的“引路人”。从逻辑上来看，优惠券其实是促销活动的简易版本，虽然不像促销一样多种多样，灵活多变，但其优点也是显而易见的。优惠券具有推广传播性强、营销方式通俗易懂和优惠简单直接等特点，一直是众多运营人员最常使用的拉新、促活手段。接下来看一下完整的优惠券系统都具备哪些组成部分。



### 优惠券属性解构

优惠券在发放前要进行基础属性的配置，合理的优惠券发放系统不只是配置优惠券的数量和金额即可，还需要设置很多相关的参数。我们接下来看一下优惠券都有哪些属性，如图：

![image-20210227142133863](http://qiniu.hivan.me/picGo/20210227142133.png)



- 生产属性：批量生产优惠券的属性，包括预算方、优惠券名称、优惠券发放张数、优惠券有限期和优惠券种类等
- 领取属性：用户领取时需要满足的条件和要求，包括用户类型、新老客、领取限量和领取时间等
- 消费属性：用户消费时进行订单优惠，包括优惠券金额、优惠券使用范围和优惠券有限期等



3种不同类型的属性在不同场景中使用，比如生产属性主要在生产优惠券时使用，领取属性主要在用户领取发放时做判断使用，而消费属性主要是用户在下单消费时判断使用。当然有一些属性可能属于多种类型，在不同场景下会重复使用。



### 优惠券的分类

优惠券的种类是多种属性的集合，通过种类可以判断出它具体如何使用。优惠券按照不同的维度有若干种分类方法。



按优惠方式分为以下几种。

- 直减：减X元
- 满减：满X元优惠Y元
- 满折：满X元打Y折
- 满返：满X元返Y元优惠券
- 随机红包：设定红包优惠金额范围，用户领取时随机直减X元



按使用范围分为以下几种。

- 订单型优惠券：按照订单维度进行优惠判断，即单个订单满足条件即可使用
- 商品型优惠券：按照商品、品类进行优惠判断，即满足优惠券使用的商品或者品类范围才可以使用
- 其他用途优惠券：非订单商品的优惠都是该范畴，如运费减免券



按平台分为以下几种。

- 全场通用券：所有商品都可以使用
- 自营优惠券：只有自营商品才可以使用
- 门店优惠券：只有具体门店的商品才可以使用



按用户属性分为以下几种。

- 新客优惠券：只有第一次消费的用户可以领取和使用的优惠券，主要用来拉新
- 首单优惠券：用户第一单使用的优惠券，这里区别于新客的概念，首单用户是指注册以后一直没有下单的用户，新客则可能是某个店铺的新客



不同维度、不同类型的优惠券在实际使用中是叠加出现的，比如自营商品的直减券可以按照订单维度设置条件使用。



### 优惠券营销行为解构

**优惠券的运营过程**

想要了解优惠券系统，首先要明白优惠券的整个运营过程。在每次发放优惠券的过程中都要经历几个步骤，如图：

![image-20210227142209933](http://qiniu.hivan.me/picGo/20210227142209.png)



- 确定预算：确定本次投放的营销行为预计花费的资金和资源情况，理论上每次营销活动都需要按照固定预算进行，超出预算的营销活动申请将不被授权执行
- 制订方案：根据预算的情况制订对应的营销方案，包括时间、地点和人群等
- 投放：按照指定的方案将优惠券投放到不同的渠道中，并对每个渠道建立监管机制
- 监控效果：对营销的数据（包括但不限于订单、人数等）进行监控，并根据监控情况作出预警和评估，以便下次活动参考



将流程细化后，我们可以归纳出几个模块，如图：

![image-20210227142218238](http://qiniu.hivan.me/picGo/20210227142218.png)



- 预算管控：负责预算环节的所有审批、管理工作，方便运营人员掌握和操作自己部门的经费
- 营销管理：负责制订各种营销活动的基础信息和策略，作为投放时的标准和用户使用的方法
- 渠道投放管理：负责管理各个渠道的情况，由于不同渠道可能对营销策略和基础信息有一定的要求，因此渠道投放也会衍生出不同的玩法和规则
- 效果监控：对活动生效期间所有的数据进行监控，确保不会超量，活动结束时对效果进行评估



#### 预算管控

预算管控主要有两个部分：预算的分配和消耗管理。在每个财年或者季度开始前，需要将各个部门确定的预算分配到对应部门的账户中，同时可以对预算消耗的情况进行监控。原则上，优惠券的预算属于用户补贴范畴，即将现金补贴给用户，在计算时应按照折算的补贴金额扣减预余额。预算对应的内容主要包括：

- 预算所属部门
- 预算金额
- 预算开始时间
- 预算结束时间
- 预算余额



#### 营销管理

营销方案的确定是优惠券投放的关键，如何生产优惠券依赖于方案的规则。我们在讲具体模块之前先讲解一下优惠券生产的过程。优惠券的生产通常是按照批次进行的，每个批次对应着创建的活动。而所有的营销方案制订都是落在活动上进行管理的，通过对批次的优惠券进行跟踪来判断当前活动执行的效果。同一批次下的优惠券类型是一致的。而根据制订的不同活动方案，系统可以根据实际业务场景的需要，以自动或手动的方式生产优惠券，处理的流程如图：

![image-20210227142323912](http://qiniu.hivan.me/picGo/20210227142323.png)



这里需要说明的是，规则判定和业务策略这两个模块主要用来保证发券的有效性和合理性，起到合规的作用。

**规则判定**

我们先来看一下规则判定，规则判定是指对发券过程的校验和规范，所有的规则和规范都是基于券种进行的。

首先，由于用户在进行一次购买时可以同时享受优惠券、促销等多种优惠，考虑到成本和用户体验，一般不同种类的优惠行为会遵守互斥和共享的规范约定，避免出现毛利低或为负的情况。原则上同一笔订单只允许使用一张优惠券，一旦选定后则无法使用其他优惠券（包括所有类型）。而优惠券和促销之间则是共享的关系，互相不冲突。

其次是有效期，所有发放出去的优惠券都有固定的有效期。有效期包括两个，一个是发放领取的有效期，即用户什么时间可以领取优惠券，这个时间是运营人员在后台设置的，原则上不应该过长，一般不大于90天；另一个则是优惠券的使用有效期，即在什么时间用户消费时可以使用该优惠券，它也是可以在后台设置的，一般不大于7天或为固定的促销周期（如双十一期间）。

最后，优惠券在交易时等同于平台补贴，是真真切切的真金白银，因此对恶意套现的行为要进行严格的把控和限制。在后台设置优惠券减免金额时，要对毛利进行判断，避免出现减免为0元或者负毛利的优惠券。配置领取时用户需要遵循限量的规则，包括同一批次的券限领几张或者每人每天限领几张。



**业务策略**

相比规则判定，业务策略则更偏向业务运营时的考量。业务策略主要是补贴策略和赔付策略。

补贴策略主要指为了向用户让利，相关方提供金额补贴，最终确定优惠力度的方案。补贴出资方包括平台、商家和代理商等。补贴的好与坏决定毛利、GMV等诸多核心指标。电商公司大多是由代理商或者商家进行补贴发券或者开展促销活动，而O2O由于行业特性，会出现较多平台自身提供补助的情况。目前很多平台都支持营销托管，因此，如何合理制订补贴策略也是营销成败的一个关键因素。

补贴策略的核心就是提高营收，我们以新客补贴为例来看一下策略的逻辑。新客补贴的目的是拉新，其主要手段就是新客优惠券。拉新的目的是让新用户带来整体平台的收入流水增加。收入流水的计算公式是：

$$销售额=购买人数\times客单价=访问人数UV\times转化率\times客单价$$



由此我们可以看到，提高整体平台的新客收入，主要决定于3个方面——人数、频次和消费能力，而补贴也是通过这3个指标来判断是否合理。

人数主要是看来访的UV基数是否足够，这个环节可以通过提高曝光率来进行调整修正。频次代表购买的频率，包括单日购买人次和单人复购次数，即转化率和复购率。消费能力则是单个用户平均购买金额，即客单价。

转化率指新客下单的转化率，转化率越高则新用户对于营收的贡献越高，低转化率的商品或者商家则无法带来高营收的基础。转化率的公式是：
$$
转化率=\frac{下单新客UV}{访问新客UV}
$$




而复购率代表质的变化，活跃用户持续下单产生复购，以确认新客完成拉新后可以持续提供营收支撑，僵尸新客是不能够提供持续回报的。复购率的公式是：
$$
复购率=\frac{下单且复购的新客UV}{下单新客UV}
$$




客单价则代表用户的平均消费能力，用户消费能力越强则贡献流水越多。客单价的公式是：
$$
客单价=\frac{新客下单总金额}{新客下单数}
$$




我们设定一个固定的补贴范围$[a,b]$，所有补贴金额不可以超出当前范围。上述3项指标高的商户或者商品应该享受更多补贴力度，依照指标高低进行打分并按照分数计算补贴金额。我们用$X_i$表示实际补贴金额，$Y_i$表示指标集合按照权重计算出的商家或商品的分值，通过计算的分值来算出应该比最低补贴金额$a$多出的金额数且该金额不能高于$b$。整理后公式如下：
$$
实际补贴金额X_i = a+Y^t_i(b-a), Y_i = N_1M_1+N_2M_2…
$$




其中，$N$是各项指标因子的权重值，$M$是根据指标计算的分值（分值可以用排名、金额等方式进行计算，分值应该在$[0,1]$区间内），而$t$代表一个变量因子，它确保曲线的斜率，该因子越大曲线向下越深，则头部享受高补贴的商家或商品越少，这样可以有效地控制总补贴费用，确保不会出现超标的情况。具体$Y_i$中包含多少因子，可以根据实际情况进行增加或减少。本书讲到的策略逻辑是基本逻辑，更深入的探讨则需要对机器学习的算法有进一步的优化，这里不做详述，大家如果有兴趣可以自行了解。

赔付策略的原理与补贴策略的原理相似，不过没有这么复杂的计算。赔付的目的是消除用户的厌恶情绪，提高用户体验，但同时也要避免恶意索赔的情况，因此，赔付的原则也是在给定的区间范围内进行赔付金额和数量的设定，同时，当达到某些条件时（如赔付优惠券总数量超限、赔付总金额超限、单个优惠券金额过大或同一订单重复赔付等）需要进行人工过审，确认后方可进行优惠券赔付。赔付的优惠券会直接放入对应用户的账户内，不需要单独领取。



**渠道投放管理**

制订完营销方案后，我们就需要向各个渠道进行优惠券投放，投放渠道不同，优惠券也有所区别。渠道主要分为5类，如图：

![image-20210227142414545](http://qiniu.hivan.me/picGo/20210227142414.png)



- 赔付：用于客服理赔使用
- 异业合作：和其他业态或平台进行合作，优惠券互换，滴滴红包可以领饿了么的优惠券就是这种形式
- 站内投放：在站内相关页面按照一定规则投放给用户
- 定向投放：通过工具进行定向人群投放，常见的有CRM（Customer Relationship Management，客户关系管理）红包，关于CRM的投放逻辑，我们在后续章节会进行详细说明，此处不做展开讲解
- 用户自领：用户通过优惠券领取页面或者领券中心自行领取，该方式包括用户点击领取和输入兑换码领取两种途径

所有红包都需要记录投放的来源，以便后续统计评估效果时使用。同一渠道下多次领取同一类型优惠券时，也要考虑金额的处理，比如拼手气红包在用户第二次、第三次领取的时候，要根据新老客、领取次数等条件对红包金额进行裁减，确保补贴能够利用最大化。

确定所有的方案和投放渠道后，就需要根据设定的规则和信息批量生产优惠券。前面我们讲到，所有的优惠券都是按照批次生产的，每个批次的优惠券会绑定到一次活动上，活动的创建会进行审批，审批通过后会按照要求自动生成优惠券批次，后续在评估效果时可以按活动维度进行统计，如图：

![image-20210227142423535](http://qiniu.hivan.me/picGo/20210227142423.png)



**效果监控**

投放出去的优惠券需要根据效果进行监控，同时需要确保投放过程的健康程度，为此需要搭建监控平台。监控平台除了要对预算使用产生的效果进行监控、评估，还需要对异常情况，如券库存不足、部门预算不足和投放效能过低等行为进行预警，确保投放质量。因此总结来看，平台主要实现两个功能：监控、预警。

监控是按照部门或者区域来划分预算的，每个部门或区域投放的补贴金额对应产生的GMV就是投放的最终效果。查看的指标包括预算分配、预算总额、预算余额、已使用预算金额、设定指标、已产生GMV和未完成GMV等。这里说的预算都是平台补贴预算，商家自身的补贴不在此范畴内。

预警主要是针对预算使用进行预警，包括以下内容。

- 存量预警：对已发的优惠券活动进行监控，消耗过快则要提出预警，以便人为判断是否追加预算补贴投放
- 预算预警：判断预算余额是否已经达到临界值，余额过低则不允许创建新的活动和进行优惠券投放
- 效能预警：对于低效能的投放，通过监控提供商户列表或商品列表，可以根据监控数据人为判断是否暂停投放

关于低效能的预警，判断时一般会比对未实施补贴的商户或商品GMV增速，如果实施补贴后依然未能达到或超过未实施补贴的商品或商品GMV增速，则可以初步判断为低效能补贴行为。此类情况应该汇总后推送预警。



## 本期系统交互情况



平台增加促销和优惠券系统，为运营提供更多有效的手段。优惠券系统提供发券返券能力，相关系统根据情况提出发券请求，优惠券系统根据需求将优惠券发放到用户的账户中。而用户打开相关页面时会请求促销系统获取促销信息和优惠券信息，用于购买流程等相关流程使用，结构如图：

![image-20210227142450669](http://qiniu.hivan.me/picGo/20210227142450.png)



由于增加了促销系统和优惠券系统，在运营角色上需要增加促销专员、优惠券专员，不过目前阶段两个职位合并在一起也是可以的。每个专员发送多个批次的优惠券给用户，优惠券以一对一的形式放入用户的账户中。用户下单时可以根据拥有的优惠券选择使用。促销活动也是如此，每个促销专员管理多个促销活动，同一个促销活动中可以允许出现多个商品。用户在下单时，订单根据商品确定支持参加哪些促销，同一个订单允许同时多个促销生效。E-R图如图：

![image-20210227142458188](http://qiniu.hivan.me/picGo/20210227142458.png)